
# These are written from the perspective of one of the per-variant
# subdirs of this directory.

.PHONY: default clean run

# MAKEIT= make -f Makefile.SSE3.PTHREADS.gcc
MAKEIT= $(MAKE)

default: 
	echo "Doing nothing during 'compile' phase, procrastinating till run."

# Build with icc and profiling:
build-prof:
	echo -e "Building RAxML with gprof enabled..."
	$(MAKE) MORECFLAGS='-pg' build-shared

build-plain:
	$(MAKE) build-shared

build-shared:
	rm -rf ../instrumented
	cp -R ../original ../instrumented
	echo -e "\nBuilding RAxML..."
	(cd ../instrumented; time $(MAKEIT) -j)

run-common: 
	echo -e "\nRunning RAxML..."
#	cd ../instrumented;\
#	(/usr/bin/time -f "SELFTIMED %e\nuser %U\nsys %S\n" ./gzip -c ../../resources/a > a.gz) 2>&1 

clean:
#	(cd ../instrumented; $(MAKEIT) clean)
